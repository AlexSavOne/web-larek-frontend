# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

### Описание базовых классов

1. **`EventEmitter`**:
   Класс `EventEmitter` предоставляет механизм работы событий. Его основные функции:

   - Установка и снятие слушателей событий.
   - Вызов слушателей при возникновении события.

2. **`Api`**:
   Класс `Api` обеспечивает взаимодействие с внешним API. Он предоставляет методы для выполнения HTTP-запросов (GET, POST, PUT, DELETE) и обработки ответов.

### Описание компонентов

1. **`BasketItemView` и `BasketView`**:

   - `BasketItemView`: отвечает за отображение отдельного товара в корзине.
   - `BasketView`: отображает все товары в корзине.

2. **`CatalogModel` и `Product`**:
   - `CatalogModel`: содержит данные о продуктах, полученные с сервера.
   - `Product`: представляет отдельный продукт с его характеристиками.

### Взаимодействие компонентов

1. Компоненты `BasketItemView` и `BasketView` взаимодействуют с `BasketModel`, который отслеживает содержимое корзины и уведомляет об изменениях.
2. Компонент `CatalogModel` взаимодействует с `Api`, чтобы получить данные о продуктах.
3. События, сгенерированные `EventEmitter`, используются для связи между компонентами и обновления интерфейса приложения.

### Используемые данные

1. Данные о продуктах хранятся в объектах типа `IProduct`.
2. Данные о состоянии корзины хранятся в объекте типа `IBasketModel`.
3. Данные о заказах хранятся в объектах типа `IOrderForm`.

### Процессы в приложении

1. При изменении содержимого корзины генерируются события с помощью `EventEmitter`.
2. События обрабатываются соответствующими компонентами, которые обновляют интерфейс в соответствии с изменениями.
3. Взаимодействие с внешним API осуществляется с помощью класса `Api`, который выполняет запросы и обрабатывает ответы.

### Более подробная документация по компоненту EventEmitter

- **Описание**:
  Класс `EventEmitter` обеспечивает работу событий. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события».

- **Методы**:

  - `constructor()`: Создает новый экземпляр класса EventEmitter.
  - `on(eventName: EventName, callback: (data: T) => void)`: Устанавливает обработчик на событие с указанным именем.
  - `off(eventName: EventName, callback: Subscriber)`: Снимает обработчик с события.
  - `emit(eventName: string, data?: T)`: Инициирует событие с указанным именем и переданными данными.
  - `onAll(callback: (event: EmitterEvent) => void)`: Подписывает обработчик на все события.
  - `offAll()`: Снимает все обработчики событий.
  - `trigger(eventName: string, context?: Partial<T>)`: Создает триггер, который при вызове генерирует событие с указанным именем и контекстом.

- **Структура данных**:
  - `_events`: Хранит карту событий и их обработчиков.

#### Примечание

Этот компонент реализует паттерн "Наблюдатель" (Observer), где объекты подписываются на события и реагируют на изменения состояния.

### Более подробная документация по компоненту Api

- **Описание**:
  Класс `Api` предоставляет интерфейс для выполнения HTTP запросов к серверу. Он абстрагирует детали работы с сетью, позволяя разделить логику работы с сетью от логики компонентов отображения.

- **Методы**:

  - `constructor(baseUrl: string, options?: RequestInit)`: Создает новый экземпляр класса Api с указанным базовым URL и опциями запроса.
  - `get(uri: string)`: Выполняет GET запрос к указанному URI.
  - `post(uri: string, data: object, method?: ApiPostMethods)`: Выполняет POST запрос к указанному URI с переданными данными.

- **Структура данных**:
  - `ApiListResponse<Type>`: Описывает ответ от сервера с коллекцией данных, содержащий общее количество элементов и сами элементы.

#### Примечание

Компонент `Api` предоставляет абстракцию для работы с сетевыми запросами, что позволяет разделить логику работы с сетью от логики компонентов отображения. Это соблюдает принцип разделения ответственности (Separation of Concerns).

### Более подробная документация по типам данных

- **Интерфейсы данных**:
  - `IProduct`: Описывает структуру продукта, содержащего информацию о товаре.
  - `IBasketModel`: Определяет интерфейс модели корзины, которая отвечает за управление товарами в корзине.
  - `IOrderForm`: Содержит описание формы заказа, включая данные покупателя, товары в заказе, способ оплаты и статус заказа.
  - `IAppState`: Описывает структуру состояния приложения, включая список продуктов, корзину, предпросмотр, список заказов, состояние загрузки и текущий шаг процесса оформления заказа.

#### Примечание

Эти типы данных используются для описания структуры объектов в приложении и обеспечивают типизацию кода, что помогает предотвратить ошибки во время разработки и улучшает понимание структуры данных при работе с кодом.
